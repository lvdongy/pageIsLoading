/*!
 * page-is-loading v1.1.2
 * Wed Jan 11 2023, lvdongy
 * Released under the MIT License.
 */
function r(r){return function(r){if(Array.isArray(r))return t(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,e){if(!r)return;if("string"==typeof r)return t(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(r,e)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.el,i=t.each,u=t.load,f=t.extraImg,c=t.ignoreImg,l=[],s=[],p=0,m=0,y=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(!(e=null==e||""===e?document.body:document.querySelector(e)))throw new TypeError("Node not found: "+e);l=e.getElementsByTagName("*");for(var g=0;g<l.length;g++){var d=l[g];"IMG"===d.nodeName&&d.src&&a(d,d.src,c)&&s.push({element:d,src:d.src});var h=window.getComputedStyle(d).backgroundImage;if(h&&"none"!==h)for(var v=void 0;v=y.exec(h);)a(d,v[2],c)&&s.push({element:d,src:v[2]})}if(f&&Array.isArray(f)&&s.push.apply(s,r(f.map((function(r){return"string"!=typeof r&&console.error('You must pass an image URL: "extraImg"'),{element:null,src:r,isExtraImg:!0}})))),0!==(p=s.length))for(var b=function(){var r=s[w],t=new Image;["load","error"].forEach((function(e){t.addEventListener(e,(function(){o(++m,p,r.element,i),m===p&&n(u),t=null}))})),t.src=r.src},w=0;w<p;w++)b();else n(u)}function n(r){if(r){if("function"!=typeof r)throw new TypeError("load is not a function");r()}}function o(r,t,e,n){if(n){if("function"!=typeof n)throw new TypeError("load is not a function");n(r,t,r/t,e)}}function a(r,t,e){if("pageIsLoadingIgnore"in r.dataset)return!1;var n,o=function(r){if(!r||"string"!=typeof r)return"";return r.split("/").pop().split("?")[0]||""}(t);return n=e,("[object RegExp]"!==Object.prototype.toString.call(n)||!e.test(o))&&("function"!=typeof e||!e(o,t))}export{e as default};
