/*!
 * page-is-loading v1.1.2
 * Wed Jan 11 2023, lvdongy
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).pageIsLoading=t()}(this,(function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e){if(e){if("function"!=typeof e)throw new TypeError("load is not a function");e()}}function r(e,t,n,r){if(r){if("function"!=typeof r)throw new TypeError("load is not a function");r(e,t,e/t,n)}}function o(e,t,n){if("pageIsLoadingIgnore"in e.dataset)return!1;var r,o=function(e){if(!e||"string"!=typeof e)return"";return e.split("/").pop().split("?")[0]||""}(t);return r=n,("[object RegExp]"!==Object.prototype.toString.call(r)||!n.test(o))&&("function"!=typeof n||!n(o,t))}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.el,a=t.each,u=t.load,f=t.extraImg,c=t.ignoreImg,l=[],s=[],p=0,d=0,y=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(!(i=null==i||""===i?document.body:document.querySelector(i)))throw new TypeError("Node not found: "+i);l=i.getElementsByTagName("*");for(var m=0;m<l.length;m++){var g=l[m];"IMG"===g.nodeName&&g.src&&o(g,g.src,c)&&s.push({element:g,src:g.src});var h=window.getComputedStyle(g).backgroundImage;if(h&&"none"!==h)for(var b=void 0;b=y.exec(h);)o(g,b[2],c)&&s.push({element:g,src:b[2]})}if(f&&Array.isArray(f)&&s.push.apply(s,e(f.map((function(e){return"string"!=typeof e&&console.error('You must pass an image URL: "extraImg"'),{element:null,src:e,isExtraImg:!0}})))),0!==(p=s.length))for(var v=function(){var e=s[I],t=new Image;["load","error"].forEach((function(o){t.addEventListener(o,(function(){r(++d,p,e.element,a),d===p&&n(u),t=null}))})),t.src=e.src},I=0;I<p;I++)v();else n(u)}}));
